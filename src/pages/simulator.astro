---
import ArticleLayout from "../layouts/ArticleLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Breadcrumb from "../components/Breadcrumb.astro";
---

<ArticleLayout
  title="æ ¼å®‰SIMè¨ºæ–­ï½œä½¿ã„æ–¹ã‹ã‚‰æœ€é©ãƒ—ãƒ©ãƒ³ã‚’30ç§’ã§åˆ¤å®š"
  description="YouTubeãƒ»SNSãƒ»ä½¿ã„æ–¹ã®å‚¾å‘ã‹ã‚‰ã€ã‚ãªãŸã«æœ€é©ãªæ ¼å®‰SIMã‚’è¨ºæ–­ã—ã¾ã™ã€‚"
>
  <Header slot="header" />
  <Footer slot="footer" />
  <Breadcrumb current="æ ¼å®‰SIMè¨ºæ–­" />

  <article>
    <h1>ã‚ãªãŸã«æœ€é©ãªæ ¼å®‰SIMè¨ºæ–­</h1>
    <p class="lead">
      æ™®æ®µã®ä½¿ã„æ–¹ã‚’é¸ã¶ã ã‘ã€‚<br />
      <strong>ç„¡é§„ãªããƒ»å¾Œæ‚”ã—ãªã„æ ¼å®‰SIM</strong>ã‚’è¨ºæ–­ã—ã¾ã™ã€‚
    </p>

    <section class="sim-diagnosis">
      <h2>ğŸ“± ã‹ã‚“ãŸã‚“è¨ºæ–­ï¼ˆå…¨3å•ï¼‰</h2>

      <!-- STEP 1 -->
      <div class="step">
        <h3>STEP 1ï½œä¸€ç•ªã‚ˆãä½¿ã†ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h3>
        <div class="options">
          <button data-app="youtube">YouTube</button>
          <button data-app="sns">Instagram / TikTok</button>
          <button data-app="x">Xï¼ˆæ—§Twitterï¼‰</button>
          <button data-app="none">ç‰¹å®šã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ãªã„</button>
        </div>
      </div>

      <!-- STEP 2 -->
      <div class="step">
        <h3>STEP 2ï½œå¤–å‡ºå…ˆï¼ˆWi-Fiãªã—ï¼‰ã§ã®åˆ©ç”¨</h3>
        <div class="options">
          <button data-time="short">çŸ­æ™‚é–“ã®ã¿</button>
          <button data-time="long">æ¯æ—¥ãƒ»é•·æ™‚é–“</button>
        </div>
      </div>

      <!-- STEP 3 -->
      <div class="step">
        <h3>STEP 3ï½œæ–™é‡‘ã®è€ƒãˆæ–¹</h3>
        <div class="options">
          <button data-priority="cheap">ã¨ã«ã‹ãå®‰ãæ¸ˆã¾ã›ãŸã„</button>
          <button data-priority="stable">é€šä¿¡ã®å®‰å®šæ€§ã‚‚ã‚ã‚‹ç¨‹åº¦é‡è¦–ã—ãŸã„</button>
          <button data-priority="pay">ä½¿ã£ãŸåˆ†ã ã‘æ”¯æ‰•ã„ãŸã„</button>
        </div>
      </div>

      <button class="diagnosis-btn" onclick="diagnose()">
        â–¶ è¨ºæ–­çµæœã‚’è¦‹ã‚‹
      </button>
    </section>
  </article>
</ArticleLayout>

<!-- ================= JS ================= -->
<script is:inline>
  let state = { app: null, time: null, priority: null };

  document.querySelectorAll(".options button").forEach(btn => {
    btn.addEventListener("click", () => {
      const group = btn.parentElement;
      group.querySelectorAll("button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      if (btn.dataset.app) state.app = btn.dataset.app;
      if (btn.dataset.time) state.time = btn.dataset.time;
      if (btn.dataset.priority) state.priority = btn.dataset.priority;
    });
  });

  function diagnose() {
    const { app, time, priority } = state;

    if (!app || !time || !priority) {
      alert("ã™ã¹ã¦é¸æŠã—ã¦ãã ã•ã„");
      return;
    }

    let carrier = "";
    let price = "";

    /* =========================
       ã¨ã«ã‹ãå®‰ãæ¸ˆã¾ã›ãŸã„
    ========================= */
    if (priority === "cheap") {
      if (app === "youtube" && time === "long") {
        carrier = "biglobe";
        price = "ç´„1,078ã€œ";
      }
      else if ((app === "sns" || app === "x") && time === "long") {
        carrier = "linksmate";
        price = "ç´„550ã€œ1,700";
      }
      else if (app === "none") {
        carrier = "rakuten";
        price = "0ã€œ3,278";
      }
      else {
        carrier = "povo";
        price = "0ã€œ";
      }
    }

    /* =========================
       é€šä¿¡å®‰å®šæ€§ã‚‚ã‚ã‚‹ç¨‹åº¦é‡è¦–
    ========================= */
    else if (priority === "stable") {
      if (app === "youtube") {
        carrier = "ahamo";
        price = "2,970";
      }
      else if (app === "sns" || app === "x") {
        carrier = "nuro";
        price = "792ã€œ2,699";
      }
      else if (time === "long") {
        carrier = "uqmobile";
        price = "3,000ã€œ4,000";
      }
      else {
        carrier = "povo";
        price = "0ã€œ";
      }
    }

    /* =========================
       ä½¿ã£ãŸåˆ†ã ã‘æ”¯æ‰•ã„ãŸã„
    ========================= */
    else if (priority === "pay") {
      if (time === "long") {
        carrier = "rakuten";
        price = "0ã€œ3,278";
      } else {
        carrier = "povo";
        price = "0ã€œ";
      }
    }

    location.href = `/result?carrier=${carrier}&price=${encodeURIComponent(price)}`;
  }
</script>

<!-- ================= CSS ================= -->
<style>
  .lead {
    margin-bottom: 24px;
    color: #555;
  }

  .sim-diagnosis {
    background: #f7f8fa;
    padding: 28px;
    border-radius: 16px;
  }

  .step {
    margin-bottom: 24px;
  }

  .options {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .options button {
    padding: 10px 16px;
    border-radius: 999px;
    border: 1px solid #ccc;
    background: #fff;
    cursor: pointer;
  }

  .options button.active {
    background: #2563eb;
    color: #fff;
    border-color: #2563eb;
  }

  .diagnosis-btn {
    width: 100%;
    margin-top: 16px;
    padding: 14px;
    font-size: 16px;
    background: #2563eb;
    color: #fff;
    border-radius: 10px;
    border: none;
    cursor: pointer;
  }
</style>
